<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Pose Estimation</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
        <h1 class="page-title">CaliVision: Body Pose Estimation</h1>

        <div class="content-container">

        <!-- Form for starting and terminating pose estimation -->
        <form method="POST" onsubmit="resetActionButton()">
            <div class="parameter-section">
                <label for="min_detection_confidence">min_detection_confidence:</label>
                <input class="slider" type="range" id="min_detection_confidence" name="min_detection_confidence" min="0"
                    max="1" step="0.1" value="0.5" onchange="updateMinDetectionConfidence(this.value)">
                <span id="min_detection_value">0.5</span>
            </div>

            <div class="parameter-section">
                <label for="min_tracking_confidence">min_tracking_confidence:</label>
                <input class="slider" type="range" id="min_tracking_confidence" name="min_tracking_confidence" min="0"
                    max="1" step="0.1" value="0.5" onchange="updateMinTrackingConfidence(this.value)">
                <span id="min_tracking_value">0.5</span>
            </div>

            <div class="parameter-section">
                <label for="model_complexity">model_complexity:</label>
                <select id="model_complexity" name="model_complexity">
                    <option value="0">0</option>
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                </select>
            </div>

            <div class="button-container">
                <input class="button" type="submit" value="{{ action_button_text }}" id="actionButton">
            </div>
        </form>

        <!-- Form for processing data -->
        <form method="GET" action="/process_data">
            <div class="button-container">
                <input class="button{{ ' button-disabled' if process_button_disabled else '' }}" type="submit"
                    value="Process Data" {{ process_button_disabled }}
                    onclick="return enableProcessData('{{ process_button_disabled }}');">
            </div>
        </form>

    </div>

    <!-- Display Video Feed -->
    <div class="video-feed-container">
        <img src="{{ url_for('index_routes.video_feed') }}" alt="Video Feed" style="max-width: 100%;">
    </div>

    <!-- JavaScript for updating displayed values and button text -->
    <script>
        function updateMinDetectionConfidence(value) {
            document.getElementById("min_detection_value").textContent = value;
        }

        function updateMinTrackingConfidence(value) {
            document.getElementById("min_tracking_value").textContent = value;
        }

    </script>
</body>

</html>